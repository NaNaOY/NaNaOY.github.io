#  Prometheus监控系统

---

## 监控系统基础概念
---

### 1. 监控系统功能组件
  >
  >- 指标数据采集(抓取)
  >
  >  > - 采集：采集器；被监控端：监控代理、应用程序自带仪表盘；黑盒监控；SNMP
  >
  >
  >- 标数据存储
  >
  >  > - 存储：SQL、NoSQL（k/v、document、column、TSDB）DataOps、AIOps
  >
  >- 指标数据趋势分析及可视化
  >
  >  > - Grafana
  >
  >- 告警（Alert）：通知
  >
  >  > - 媒介：email、短信、Wechat、Dingtalk、Slack
  >

### 2. 监控体系(自底向上)
  >- 系统层监控
  >
  >>- 系统监控: CPU,Load,Memory,Swap,Disk IO,Processes,Kernel Parameters .....
  >>- 网络监控: 网络设备,工作负载,网络延迟,丢包率 ......
  >
  >- 中间件及基础设施类系统监控
  >
  >  > - 消息中间件: Kafka,RocketMQ和RabbitMQ等
  >  > - Web服务容器: Tomcat和Jetty等
  >  > - 数据库及缓存系统: MySQL,PostgreSQL,MogoDB,ElasticSearch和Redis等
  >  > - 数据库连接池: ShardingSpere等
  >  > - 存储系统: Ceph等
  >
  >- 应用层监控
  >
  >  > - 用于衡量应用程序代码的状态和性能
  >
  >- 业务层监控
  >
  >  > - 用于衡量应用程序的价值,例如电子商务网站上的销售量
  >  > - QPS,DAU日活,转化率
  >  > - 业务接口:登陆数,注册数,订单量,搜索量和支付量等

### 3. 云原生时代的可观测性
  >- 可观测性系统
  > > - 指标监控: 随时间推移产生的一些与监控相关的聚合数据点
  > > - 日志监控: 离散式的日志或事件
  > > - 链路跟踪: 分布式应用调用链跟踪
  >
  >- CNCF将可观测性和数据分析归类一个单独的类别,且划分成了4个子类 
  >
  > > - 监控系统: 以Prometheus等为代表
  > > - 日志系统: 以ElasticStack和PLG Stack等为代表
  > > - 分布式调用链跟踪系统: 以Zipkin,Jaeger,SkyWalking,Pinpoint等为代表
  > > - 混沌工程系统: 以ChaosMonkey和ChaosBlade等为代表

### 4. 黄金指标

  >- 延迟
  >
  > > - 服务请求所需要的时长,例如HTTP请求平均延迟
  > > - 需要区分失败请求和成功请求
  >
  >- 流量
  >
  > > - 衡量服务的容量需求,例如每秒处理的HTTP请求数或者数据库系统的事务数量
  >
  >- 错误
  >
  > > - 请求失败的速率,用于衡量错误发生的情况
  > > - 例如,HTTP 500错误数等显示失败,返回错误内容或无效内容等隐式失败,以及由策略原因导致的失败(例如强制要求响应时间超过30毫秒的请求视为错误)
  >
  >- 饱和度
  >
  > > - 衡量资源的使用情况,用于表达应用程序有多"满"
  > > - 例如内存,CPU,I/O,磁盘等资源的使用量

